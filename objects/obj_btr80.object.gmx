<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_btr80</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>anglecamera = 0
up = 1
stalker = 0 
bonusdistguys = 0
cibleallie = obj_zombie
angledest = 0
path = path_add();
speedcible = 1
bonusdistguys = 1000
lightid = 0
with(instance_create(x,y,obj_light01)){
mode = 18;other.lightid = id;
}

if instance_exists(obj_light_torch) {
with(obj_light_torch){
instance_destroy();
}
with(instance_create(x,y,obj_light_torch)){
parent = obj_zombie
 sl_light_xscale       = 2.8;
 sl_light_yscale       = 2.8;
 sl_light_shadowfactor = 1.03;
 SL_light_cast_obj(obj_zombie,spr_character_smask);
}
/*with(instance_create(x,y,obj_light_torchstalker2)){
parent = obj_zombie
 sl_light_xscale       = 2.8;
 sl_light_yscale       = 2.8;
 sl_light_shadowfactor = 1.03;
 SL_light_cast_obj(obj_zombie,spr_character_smask);
}*/

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if ds_grid_get(obj_quest.territoiregrid,3,room) &gt; 70 {

with (instance_create(x+lengthdir_x(250,image_angle), 
y+lengthdir_y(250,image_angle), obj_rocketfinal)){
randomrange = random_range(-1,1);
dgt = other.dgt;
direction = other.image_angle}
}
alarm[2] = 500
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//
if up = 1 {up = 0}else{up = 1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///tir de l'enemi rajouter les collisions des balles

dgt = ((0.4*1) * (obj_zombie.level+20 / 80))*(2)//120 pas beaucoup de vie surtout si on compte les armes les talent et les ajout mods //0.2


if obj_zombie.hp &lt;= 0 {}else{
shootstalker = 0
if stalker = 0 {shootstalker = 1}
if shootstalker = 1 {

player_x = obj_zombie.x;
player_y = obj_zombie.y;
var dir2 = point_direction(x,y,obj_zombie.x,obj_zombie.y);
if abs(angle_difference(dir2,image_angle)) &lt;= 25 {
if (point_distance(x, y, player_x, player_y) &lt; 1900 ) 

{
///frequence de tir
alarm[0] = 4
collivision = obj_zombie






if visibilitercible = 1 {//alarm[4] = 75
///instance_create ( x+50,y+50,obj_bullet_enemy)

var ex, ey;
ex = instance_nearest(x, y, obj_zombie).x;
ey = instance_nearest(x, y, obj_zombie).y;
if obj_zombie.hp &gt; 0 {

//firebullet

with (instance_create(x+lengthdir_x(150,image_angle), y+lengthdir_y(150,image_angle),obj_firebulletenemy))
        {
        idcreateur = other.id
        image_angle = other.image_angle//point_direction(x, y, ex, ey);
        }
        
        with (instance_create(x+lengthdir_x(150,image_angle), y+lengthdir_y(150,image_angle),obj_tirfume))
        {
        idcreateur = other.id
        image_angle = other.image_angle//point_direction(x, y, ex, ey);
        }
        }
        //
        
          dir = image_angle
      
        anglerdm = random_range(-5,5)
        if ds_grid_get(obj_quest.territoiregrid,3,room) &gt; 70 {objbullet = obj_bullet_stalker }else{objbullet = obj_bullet_enemy}
        
with (instance_create(x+lengthdir_x(150,image_angle+anglerdm), y+lengthdir_y(150,image_angle+anglerdm), objbullet))

   {
   //dgt = other.dgt
        audio_play_sound(snd_m16a1,0,0)
//move_towards_point(obj_zombie.x,obj_zombie.y,70/global.varfpsmax)
        
        dgt = other.dgt
         direction = point_direction(x, y, x+lengthdir_x(150,other.image_angle+other.anglerdm), y+lengthdir_y(150,other.image_angle+other.anglerdm));
         image_angle = point_direction(x, y, x+lengthdir_x(150,other.image_angle+other.anglerdm), y+lengthdir_y(150,other.image_angle+other.anglerdm));
      
         }
         }}}

}}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

cibleallie = 0
cibledist = 500000
if ds_grid_get(obj_quest.territoiregrid,3,room) &gt; 70 {
//ALLIE
if instance_exists(obj_enemy2){with(obj_enemy2){
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}}}

}else{

//ENEMI
if instance_exists(oOtherClient){with(oOtherClient){
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}}}

if instance_exists(obj_zombie){with(obj_zombie){
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
if hp &gt; 0 &amp;&amp; obj_zombie.peacefull = 0 &amp;&amp; obj_zombie.danslalumiere &gt; random_range(20,30) {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

/*}else if instance_exists(obj_taxezone) &amp;&amp; hp &gt; 0 &amp;&amp; other.karmabas = 0 &amp;&amp; obj_zombie.danslalumiere &gt; random_range(20,30) {//si taxe sur zone
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)
*/}else if room = room161 &amp;&amp; hp &gt; 0 &amp;&amp; obj_zombie.danslalumiere &gt; random_range(20,30) {//debut du jeu
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}else if other.alarm[6] &gt; 0 {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}

}}}

if instance_exists(obj_ephemere){with(obj_ephemere){
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}}}

if instance_exists(obj_stalker){with(obj_stalker){
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
if prisonierdia = 1 or peacefull = 1{}else{
if possedeunprisonier = 1 {other.avertissement = 1}
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}}}}

}



if instance_exists(lightid) {lightid.image_angle = image_angle;
lightid.sl_light_angle = image_angle
lightid.x = x+lengthdir_x(150,image_angle);
lightid.y = y+lengthdir_y(150,image_angle);}





if abs(angle_difference(image_angle,angledest)) &lt;= 5 //floor(image_angle) = floor(angledest) 
&amp;&amp; alarm[1] &lt; 0 
{
/*if up = 1 {angledest += 1;if alarm[1] &lt; 0 {alarm[1] = random(500)}
}else{angledest -= 1;if alarm[1] &lt; 0 {alarm[1] = random(500)}}*/
//i = 100
//alarm[1] = 50
var i;
 for (i = 0; i &lt; 100; i += 1)
    {
    angledest = floor(random(360))
    if (mp_grid_path(global.grid, path, x+lengthdir_x(1100,angledest), y+lengthdir_y(1100,angledest), 
    x+lengthdir_x(1100,angledest), y+lengthdir_y(1100,angledest) ,2)) {
    i = 100
    //alarm[1] = 50
    
    
    }}

}
//}

//if up = 1 {
image_angle += sin(degtorad(angledest - image_angle))*(2*speedcible);//lerp(anglecamera, angledest, 0.05)


if cibleallie &gt; 0 {
player_x = cibleallie.x;
player_y = cibleallie.y;



//if obj_zombie.lightnowroom = 0 {

if instance_exists(obj_bullet) or instance_exists(obj_shoot)
 or instance_exists(obj_bulletassaut) or instance_exists(obj_bigexplo)
  or instance_exists(obj_bigexplo) or instance_exists(o_explosion_piece) {
  alarm[1] = 150
  }

  if alarm[1] &gt; 0 {angledest = point_direction(x,y,cibleallie.x,cibleallie.y); }



/*if (point_distance(x, y, player_x, player_y) &lt; 900 ) &amp;&amp; abs(angle_difference(dir2,image_angle)) &lt;= 30 {
///test de ouf pour vision de perso




}else{*/
/*if anglecamera &lt; angledest {lerp
anglecamera += (0.4/global.varfpsmax)*speedcible
}else {
anglecamera -= (0.4/global.varfpsmax)*speedcible
}*/
//}


/*if up = 0 {
if anglecamera &gt; -50 {
anglecamera -= 0.2/global.varfpsmax
}else{
up = 1
}
}*/


angletotal = angledebase + anglecamera
//image_angle = anglecamera//angletotal
//}

speedcible = 1 

scr_collienemy();

if (point_distance(x, y, player_x, player_y) &lt; 1900 ) &amp;&amp; visibilitercible = 1 {
///test de ouf pour vision de perso
var dir2 = point_direction(x,y,cibleallie.x,cibleallie.y);


if abs(angle_difference(dir2,image_angle)) &lt;= 25 {
angledest = dir2
alarm[1] = 150
//image_angle = dir2
if alarm[0] &lt; 0 {
alarm[0] = 1}
if alarm[2] &lt; 0 {
alarm[2] = 100}
speedcible = 2


}
}else{
alarm[2] = -1
}

}

//LUMIERE
/*
mode = 0
    if instance_exists(obj_engine) {
switch mode
{
case 0:
{
    sprite = spr_light05; // Lumière orange
    scale_x  = 4;
    scale_y  = 4;
    angle  = direction;
    color  = c_red;
    alpha  = 0.9;
} break;

case 1:
{
    sprite = spr_light04; // Murale blanche 1
    scale  = 0.7;
    angle  = 270;
    color  = make_color_rgb(221,243,249);
    alpha  = 0.6;
} break;

case 2:
{
    sprite = spr_light04; // Murale blanche 2
    scale  = 0.7;
    angle  = 90;
    color  = make_color_rgb(221,243,249);
    alpha  = 0.6;
} break;

case 3:
{
    sprite = spr_light04; // Murale blanche 3
    scale  = 0.7;
    angle  = 90;
    color  = make_color_rgb(203,236,245);
    alpha  = 0.5 + random(0.1);
} break;

case 4:
{
    sprite = spr_light04; // Murale jaune
    scale  = 0.7;
    angle  = 0;
    color  = make_color_rgb(255,189,51);
    alpha  = 0.6;
} break;

case 5:
{
    sprite = spr_light04; // Murale rouge
    scale  = 0.7;
    angle  = 90;
    color  = make_color_rgb(255,20,4);
    alpha  = 0.4;
} break;

case 6: // Faible lumière blanche
{
    sprite = spr_light01;
    scale  = 3.7;
    angle  = 0;
    color  = c_white;
    alpha  = 0.15;
} break;

case 7: // Murale orange
{
    sprite = spr_light04;
    scale  = 0.85;
    angle  = 270;
    color  = c_orange;
    alpha  = 0.7;
} break;

case 8: // Murale orange 2
{
    sprite = spr_light04;
    scale  = 0.83;
    angle  = 270;
    color  = make_color_rgb(255,176,60);
    alpha  = 0.5 + random(0.1);
}

}

SL_draw_sprite_light(sprite,0,x,y,scale_x,scale_y,image_angle,color,alpha);
}

*/
//}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
