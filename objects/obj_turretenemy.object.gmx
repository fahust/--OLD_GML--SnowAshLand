<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_turretenemy</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>anglecamera = 0
up = 1

bonusdistguys = 0

nouvel_angle = 0
idlight = 0
with(instance_create(x,y,obj_light01)){
mode = 25
other.idlight = id
}
stalker = 0

hp = 10

dgt = ((10) * (obj_zombie.level+20 / 80))//120 pas beaucoup de vie surtout si on compte les armes les talent et les ajout mods //0.2
alarm[1] = 100
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if instance_exists(idlight){
with(idlight){instance_destroy();}
}

create_explosion(x,y);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//
alarm[1] = 100
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///tir de l'enemi rajouter les collisions des balles
if cibleallie = 0 {}else{
if instance_exists(cibleallie){
if obj_zombie.hp &lt;= 0 {}else{
shootstalker = 1
if stalker = 0 {shootstalker = 1}
if shootstalker = 1 {
if obj_zombie.lightnowroom = 0 {
player_x = cibleallie.x;
player_y = cibleallie.y;
var dir2 = point_direction(x,y,cibleallie.x,cibleallie.y);
if abs(angle_difference(dir2,image_angle)) &lt;= 25 {
if (point_distance(x, y, player_x, player_y) &lt; 500 ) &amp;&amp; alarm[0] &lt; 1 

{
///frequence de tir

collivision = cibleallie
visibilitercible = 0


scr_collienemy();


if visibilitercible = 1 {//alarm[4] = 75
///instance_create ( x+50,y+50,obj_bullet_enemy)

var ex, ey;
ex = cibleallie.x;
ey = cibleallie.y;
if obj_zombie.hp &gt; 0 {

//firebullet

with (instance_create(x+lengthdir_x(150,image_angle), y+lengthdir_y(150,image_angle),obj_firebulletenemy))
        {
        idcreateur = other.id
        image_angle = point_direction(x, y, ex, ey);
        }
        
        with (instance_create(x+lengthdir_x(150,image_angle), y+lengthdir_y(150,image_angle),obj_tirfume))
        {
        idcreateur = other.id
        image_angle = point_direction(x, y, ex, ey);
        }
        }
        //
        
          dir = image_angle
      
        anglerdm = random_range(-10,10)
if ds_grid_get(obj_quest.territoiregrid,3,room) &gt; 70 {objbullet = obj_bullet_stalker}else{objbullet = obj_bullet_enemy }
with (instance_create(x+lengthdir_x(150,image_angle+anglerdm), y+lengthdir_y(150,image_angle+anglerdm), objbullet))

   {
   //dgt = other.dgt
        audio_play_sound(snd_m16a1,0,0)
//move_towards_point(obj_zombie.x,obj_zombie.y,70/global.varfpsmax)
        
        dgt = other.dgt
         direction = point_direction(x, y, x+lengthdir_x(150,other.image_angle+other.anglerdm), y+lengthdir_y(150,other.image_angle+other.anglerdm));
         image_angle = point_direction(x, y, x+lengthdir_x(150,other.image_angle+other.anglerdm), y+lengthdir_y(150,other.image_angle+other.anglerdm));
      
         }
         alarm[0] = 4
         }}}

}}}}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

cibleallie = 0
player_x = x
player_y = y
cibledist = 500000
if ds_grid_get(obj_quest.territoiregrid,3,room) &gt; 70 {stalker = 1
//ALLIE
if instance_exists(obj_enemy2){with(obj_enemy2){
var dir3 = point_direction(other.x,other.y,x,y);
if abs(angle_difference(dir3,other.image_angle)) &lt;= 25 {
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}}}}

}else{stalker = 0

//ENEMI
if instance_exists(oOtherClient){with(oOtherClient){
var dir3 = point_direction(other.x,other.y,x,y);
if abs(angle_difference(dir3,other.image_angle)) &lt;= 25 {
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}}}}

if instance_exists(obj_zombie){with(obj_zombie){
var dir3 = point_direction(other.x,other.y,x,y);
if abs(angle_difference(dir3,other.image_angle)) &lt;= 25 {
if point_distance(x,y,other.x,other.y) &lt; other.cibledist &amp;&amp; hp &gt; 0 &amp;&amp; obj_zombie.peacefull = 0 {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)//}

/*}else if instance_exists(obj_taxezone) &amp;&amp; hp &gt; 0 &amp;&amp; other.karmabas = 0 &amp;&amp; obj_zombie.danslalumiere &gt; random_range(20,30) {//si taxe sur zone
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)
*/}else if room = room161 &amp;&amp; hp &gt; 0 {//debut du jeu
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}else if other.alarm[6] &gt; 0 {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}

}}}

if instance_exists(obj_ephemere){with(obj_ephemere){
var dir3 = point_direction(other.x,other.y,x,y);
if abs(angle_difference(dir3,other.image_angle)) &lt;= 25 {
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}}}}

 if room = room161 {}else{
if instance_exists(obj_stalker){with(obj_stalker){
var dir3 = point_direction(other.x,other.y,x,y);
if abs(angle_difference(dir3,other.image_angle)) &lt;= 25 {
if point_distance(x,y,other.x,other.y) &lt; other.cibledist {
if prisonierdia = 1 or peacefull = 1{}else{
if possedeunprisonier = 1 {other.avertissement = 1}
other.cibleallie = id;other.cibledist = point_distance(x,y,other.x,other.y)

}}}}}
}

}






if hp &lt; 0 {
instance_destroy();
}


if obj_zombie.lightnowroom = 0 {


//if alarm[0] &lt;= 0 {
if up = 1 {
if anglecamera &lt; 50 {
anglecamera += 0.5
}else{
up = 0
}
}


if up = 0 {
if anglecamera &gt; -50 {
anglecamera -= 0.5
}else{
up = 1
}
}/*}else{
if cibleallie = 0 {}else{
if instance_exists(cibleallie) {
nouvel_angle = point_direction(x,y,cibleallie.x,cibleallie.y)
}}}*/

visibilitercible = 0
if cibleallie = 0 {}else{
player_y = cibleallie.y
player_x = cibleallie.x
if (point_distance(x, y, player_x, player_y) &lt; 500 )  {
///test de ouf pour vision de perso
//var dir2 = point_direction(x,y,obj_zombie.x,obj_zombie.y);
visibilitercible = 0
player_x = cibleallie.x
player_y = cibleallie.y
//cibleallie = obj_zombie
scr_collienemy();
}}

if visibilitercible = 0 {alarm[0] = -1
cibleallie = 0}

/*var dir2 = point_direction(x,y,cibleallie.x,cibleallie.y);
if (point_distance(x, y, player_x, player_y) &lt; 500 ) &amp;&amp; abs(angle_difference(dir2,image_angle)) &lt;= 25 
&amp;&amp; visibilitercible = 1 
{
///test de ouf pour vision de perso




}else{

}*/



if cibleallie = 0 {
angletotal = angledebase + anglecamera
nouvel_angle = angletotal
}else{
if (point_distance(x, y, player_x, player_y) &lt; 500 )  {
///test de ouf pour vision de perso
var dir2 = point_direction(x,y,cibleallie.x,cibleallie.y);


if abs(angle_difference(dir2,image_angle)) &lt;= 25 //&amp;&amp; visibilitercible = 1 
{

nouvel_angle = dir2
if alarm[0] &lt; 0 {
alarm[0] = 1
}
}
}
}


image_angle += sin(degtorad(nouvel_angle - image_angle)) * 8;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with(other){instance_destroy();}
hp -= 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_shoot">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with(other){instance_destroy();}
hp -= 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bulletassaut">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>with(other){instance_destroy();}
hp -= 1
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite_ext(spr_turrettrain,image_number,x,y,1,1,image_angle,c_white,1)
sprite_index = spr_turrettrain
if visibilitercible = 1 {image_speed = 1}else{image_speed = 0}
//draw_sprite_ext(spr_turretbase,0,x,y,1,1,-180,c_white,1)
//draw_sprite_ext(spr_turretbase,0,x,y,1,1,0,c_white,1)


if room = room161 {//show_message("vu")
 if instance_exists(obj_engine){

     sprite = sprite_index; // Lumière orange
    scale_x  = 1;
    scale_y  = 1;
    angle  = image_angle;
    color  = c_green;
    alpha  = 1;
    //if obj_zombie.lowgpu2 = 3 {}else{
 SL_draw_sprite_light(sprite,0,x,y,scale_x,scale_y,angle,color,alarm[1]/100);
 //}
 
}
draw_sprite_ext(sprite_index,0,x,y,1,1,image_angle,c_green,alarm[0]/100)
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
