<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_atelier</spriteName>
  <solid>-1</solid>
  <visible>-1</visible>
  <depth>125</depth>
  <persistent>0</persistent>
  <parentName>obj_environment</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>checkdestroygreen = 0
hp = 10000
idlightid2 = 0
reactualiz = 0
alarm[0] = 20
idatelier = 0
spotlight = 0
demaragecraft = 0
positive = 0
negative = 0
possede = 1//si l obj ne peut etre detruis
mousexnow = 0
shakedroite = 0

//
craft = 0

ressourcesuppr[1] = 0
ressourcesuppr[2] = 0
ressourcesuppr[3] = 0
ressourcesuppr[4] = 0
ressourcesuppr[5] = 0
ressourcesuppr[6] = 0
ressourcesuppr[7] = 0
ressourcesuppr[8] = 0
ressourcesuppr[9] = 0
ressourcesuppr[10] = 0
ressourcesuppr[11] = 0
ressourcesuppr[12] = 0
ressourcesuppr[13] = 0
ressourcesuppr[14] = 0
ressourcesuppr[15] = 0

ressource[1] = 0
ressource[2] = 0
ressource[3] = 0
ressource[4] = 0
ressource[5] = 0
ressource[6] = 0
ressource[7] = 0
ressource[8] = 0
ressource[9] = 0
ressource[10] = 0
ressource[11] = 0
ressource[12] = 0
ressource[13] = 0
ressource[14] = 0
ressource[15] = 0



destroymouse = 0

idadestroy1 = 0

//atelier
//generateur
//lampe
//centre d usinage d'armure
//centre d usinage d arme
//bar 
//cuisine
//climatiseur
//HDC (humanity data center)
//coffre LINK
//tourelle vise les rocket en 2 seconde ,si joueur tire de trop loin rocket ne l'attein pas
//
//


guildeid = 0
//poseobjet = 1
craftnowobject = 0
nocreate = 1
checkok = 0
checkpasok = 0

var xxmouse = mouse_x
var yymouse = mouse_y

var xx = x
var yy = y

var xx1 = xx + lengthdir_x(50,image_angle)
var yy1 = yy + lengthdir_y(50,image_angle)
var xx2 = xx + lengthdir_x(50,image_angle+90)
var yy2 = yy + lengthdir_y(50,image_angle+90)
var xx3 = xx + lengthdir_x(50,image_angle+180)
var yy3 = yy + lengthdir_y(50,image_angle+180)
var xx4 = xx + lengthdir_x(50,image_angle+270)
var yy4 = yy + lengthdir_y(50,image_angle+270)



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if reactualiz = 0 {
instance_create(x,y,obj_fumeecaisse2)
//supression de la light proche si destruction
if craftnowobject = 19 {
if instance_exists(obj_light01){
with(obj_light01){
if idlightidconstruct &gt; 0 {
if point_distance(x,y,other.x,other.y) &lt; 2400 {
instance_destroy();
}
}}}
}

if instance_exists(idadestroy1){
with(idadestroy1){instance_destroy()}
with(idadestroy2){instance_destroy()}
with(idadestroy3){instance_destroy()}
with(idadestroy4){instance_destroy()}
with(idadestroy5){instance_destroy()}
with(idadestroy6){instance_destroy()}
with(idadestroy7){instance_destroy()}
with(idadestroy8){instance_destroy()}
with(idadestroy9){instance_destroy()}
with(idadestroy10){instance_destroy()}
with(idadestroy11){instance_destroy()}
with(idadestroy12){instance_destroy()}
with(idadestroy13){instance_destroy()}
with(idadestroy14){instance_destroy()}
with(idadestroy15){instance_destroy()}
with(idadestroy16){instance_destroy()}
with(idadestroy17){instance_destroy()}
with(idadestroy18){instance_destroy()}
with(idadestroy19){instance_destroy()}
with(idadestroy20){instance_destroy()}
with(idadestroy21){instance_destroy()}
with(idadestroy22){instance_destroy()}

}

obj_constructreception.guildnetbeta = 666666
obj_constructreception.xnetbeta = x
obj_constructreception.ynetbeta = y
obj_constructreception.objnetbeta = craftnowobject
obj_constructreception.anglenetbeta = image_angle
if room = room119 {varroom = 1}
if room = room115 {varroom = 2}
if room = room116 {varroom = 3}
if room = room117 {varroom = 4}
if room = room118 {varroom = 5}
obj_constructreception.roomnetbeta = room// varroom

if instance_exists(obj_network){

 for (i = 0; i &lt; 500; i += 1)
    {
    if obj_constructreception.mygridprops[# i, 6] = real(room) &amp;&amp; 
    obj_constructreception.mygridprops[# i, 2] = x &amp;&amp;
    obj_constructreception.mygridprops[# i, 3] = y {
    ds_grid_set(obj_constructreception.mygridprops, i, 2, -3);
    ds_grid_set(obj_constructreception.mygridprops, i, 3, -3);
    ds_grid_set(obj_constructreception.mygridprops, i, 6, -3); 
    i = 500 
    }
    }
    
    
 for (i = 0; i &lt; 5000; i += 1)
    {
    if obj_constructreception.mygrid[# i, 6] = real(room) &amp;&amp; 
    obj_constructreception.mygrid[# i, 2] = x &amp;&amp;
    obj_constructreception.mygrid[# i, 3] = y {
    ds_grid_set(obj_constructreception.mygrid, i, 1, -1);
    ds_grid_set(obj_constructreception.mygrid, i, 2, -1);
    ds_grid_set(obj_constructreception.mygrid, i, 3, -1);
    ds_grid_set(obj_constructreception.mygrid, i, 4, -1);
    ds_grid_set(obj_constructreception.mygrid, i, 5, -1);
    ds_grid_set(obj_constructreception.mygrid, i, 6, -1); 
    i = 5000 
    }
    }
}else{
for (i = 0; i &lt; 5000; i += 1)
    {
    if obj_constructreception.mygridsolo[# i, 6] = real(room) &amp;&amp; 
    obj_constructreception.mygridsolo[# i, 2] = x &amp;&amp;
    obj_constructreception.mygridsolo[# i, 3] = y {
    ds_grid_set(obj_constructreception.mygridsolo, i, 1, -1);
    ds_grid_set(obj_constructreception.mygridsolo, i, 2, -1);
    ds_grid_set(obj_constructreception.mygridsolo, i, 3, -1);
    ds_grid_set(obj_constructreception.mygridsolo, i, 4, -1);
    ds_grid_set(obj_constructreception.mygridsolo, i, 5, -1);
    ds_grid_set(obj_constructreception.mygridsolo, i, 6, -1); 
    i = 5000 
    }
    }
}

}



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///SERRE APPEL DANS STEP
with(instance_create(x,y,obj_toitserre)){other.idadestroy1 = id}
with(instance_create(x+lengthdir_x(200,image_angle),y-lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy2 = id ; culture = 1}
with(instance_create(x+lengthdir_x(200,image_angle),y+lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy3 = id ; culture = 2}
with(instance_create(x+lengthdir_x(100,image_angle),y-lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy4 = id ; culture = 3}
with(instance_create(x+lengthdir_x(100,image_angle),y+lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy5 = id ; culture = 4}
with(instance_create(x-lengthdir_x(100,image_angle),y-lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy6 = id ; culture = 5}
with(instance_create(x-lengthdir_x(100,image_angle),y+lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy7 = id ; culture = 6}
with(instance_create(x-lengthdir_x(200,image_angle),y-lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy8 = id ; culture = 7}
with(instance_create(x-lengthdir_x(200,image_angle),y+lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy9 = id ; culture = 8}
with(instance_create(x,y-lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy10 = id ; culture = 9}
with(instance_create(x,y+lengthdir_y(50,image_angle),obj_plantconstruct)){other.idadestroy11 = id ; culture = 10}

with(instance_create(x-lengthdir_x(200,image_angle),y,obj_light01)){other.idadestroy23 = id ;mode = 15}
with(instance_create(x+lengthdir_x(200,image_angle),y,obj_light01)){other.idadestroy22 = id ;mode = 15}
//with(instance_create(x+350,y-350,obj_light01)){other.idadestroy17 = id ;mode = 15}
//with(instance_create(x-350,y+350,obj_light01)){other.idadestroy18 = id ;mode = 15}
//with(instance_create(x+350,y+350,obj_light01)){other.idadestroy19 = id ;mode = 15}
//with(instance_create(x+354,y+550,obj_light01)){other.idadestroy20 = id ;mode = 15}
//with(instance_create(x-354,y+550,obj_light01)){other.idadestroy21 = id ;mode = 15}

//REACTUALISER LAMPE TORCH
if instance_exists(obj_light_torch) {
with(obj_light_torch){
instance_destroy();
}
with(instance_create(x,y,obj_light_torch)){
parent = obj_zombie
 sl_light_xscale       = 2.8;
 sl_light_yscale       = 2.8;
 sl_light_shadowfactor = 1.03;
 SL_light_cast_obj(obj_zombie,spr_character_smask);
}

}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if room = room119 or room = room115 or room = room116 or room = room117 or room = room118 {
instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///FAIRE APPARAITRE LES HP SELON ITEM ET LIGHT SPOTLIGHT
hp = 500
if craftnowobject &gt; 0 &amp;&amp; craftnowobject &lt; 5 {
hp = 1000}
if craftnowobject &gt; 4 &amp;&amp; craftnowobject &lt; 9 {
hp = 5000}
if craftnowobject &gt; 8 &amp;&amp; craftnowobject &lt; 13 {
hp = 10000}

if craftnowobject &gt; 12 &amp;&amp; craftnowobject &lt; 30 {
hp = 3000}




if craftnowobject = 25 {



 idlightid2 = instance_create(other.x,other.y,obj_light01)
  with(idlightid2){
mode = 16;
idlightidconstruct = other.id;}



if instance_exists(obj_light_torch) {
with(obj_light_torch){
instance_destroy();
}
with(instance_create(x,y,obj_light_torch)){
parent = obj_zombie
 sl_light_xscale       = 2.8;
 sl_light_yscale       = 2.8;
 sl_light_shadowfactor = 1.03;
 SL_light_cast_obj(obj_zombie,spr_character_smask);
}

}


}






/*
if craftnowobject = 25 {
spotlight = 0

with(obj_constructobjintrmap){
if point_distance(x,y,other.x,other.y) &lt; 150 {
if craftnowobject = 19 {
if guildeid = obj_guilde.guildesend {
other.spotlight = 1
}}}
}

if spotlight = 1 {
if instance_exists(idlightid2){
with(idlightid2){
mode = 10;
idlightidconstruct = id;}
}else{

 idlightid2 = instance_create(x,y,obj_light01)
 with(idlightid2){
mode = 10;
idlightidconstruct = other.id;}
}
}}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>checkdestroygreen = 0
if hp &lt; 0 {instance_destroy();}
if alarm[1] &gt; 1000 {alarm[1] = 10000}
if alarm[0] &lt; 0 {


if craftnowobject = 26 {
    sprite = spr_light01; // Lumière orange
    scale  = 1.5;
    angle  = 0;
    color  = c_orange;
    alpha  = 1;
    SL_draw_sprite_light(sprite,0,x,y,scale,scale,angle,color,alpha);

}




if craftnowobject = 24 {//SERRE
sprite_index = spr_solserre
}

//DESTRUCTION OBJET
if poseobjet = 0 {
if craftnowobject = 24 {//SERRE
if not instance_exists(idadestroy1){
alarm[3] = 10
}
}// FIN SERRE






if (abs(mouse_x - x) &lt; 20) &amp;&amp; (abs(mouse_y - y) &lt; 20)
{
if keyboard_check(ord("E")) &amp;&amp; possede = 1 &amp;&amp; guildeid = obj_guilde.guildesend {
checkdestroygreen = 1
totalressource2 = ressource[1]+ressource[2]+ressource[3]+ressource[4]+ressource[5]+ressource[6]+ressource[7]+ressource[8]+
ressource[9]+ressource[10]+ressource[11]+ressource[12]+ressource[13]+ressource[14]+ressource[15]
if totalressource2 &gt; 0 {destroymouse += 1}
if destroymouse &gt; 30 {
//if instance_exists(obj_atelier) or showinv = true {
if not instance_exists(obj_constructdestroy){
with(instance_create(x,y,obj_constructdestroy)){
craftnowobject = other.craftnowobject
hp = other.hp
iddestroy = other.id 
}}
}}else{destroymouse = 0}
}else{destroymouse = 0}
}


var xxmouse = mouse_x
var yymouse = mouse_y

var xx = mouse_x
var yy = mouse_y

var xx1 = xx + lengthdir_x(50,image_angle)
var yy1 = yy + lengthdir_y(50,image_angle)
var xx2 = xx + lengthdir_x(50,image_angle+90)
var yy2 = yy + lengthdir_y(50,image_angle+90)
var xx3 = xx + lengthdir_x(50,image_angle+180)
var yy3 = yy + lengthdir_y(50,image_angle+180)
var xx4 = xx + lengthdir_x(50,image_angle+270)
var yy4 = yy + lengthdir_y(50,image_angle+270)


nocreate = 0

checkpasok = 0
checkok = 0

if craftnowobject = 13 {sprite_index = spr_atelier}
if craftnowobject = 14 {sprite_index = spr_fabricatorarmor}
if craftnowobject = 15 {sprite_index = spr_fabricatorweapon}
if craftnowobject = 16 {sprite_index = spr_climatiseur}
if craftnowobject = 17 {sprite_index = spr_comptoir}
if craftnowobject = 18 {sprite_index = spr_kitchen}
if craftnowobject = 19 {sprite_index = spr_generator}
if craftnowobject = 20 {sprite_index = spr_atelier}
if craftnowobject = 21 {sprite_index = spr_atelier}
if craftnowobject = 22 {sprite_index = spr_atelier}
if craftnowobject = 23 {sprite_index = spr_atelier}
if craftnowobject = 24 {sprite_index = spr_atelier}
if craftnowobject = 25 {sprite_index = spr_lampe}
if craftnowobject = 26 {sprite_index = spr_structuregrunge}//imprimente
if craftnowobject = 27 {sprite_index = spr_lampe}//nonutilisé mais prioritaire
if craftnowobject = 28 {sprite_index = spr_lampe}//nonutilisé mais prioritaire
if craftnowobject = 29 {sprite_index = spr_lampe}//nonutilisé mais prioritaire
if craftnowobject = 30 {sprite_index = spr_lampe}//nonutilisé mais prioritaire


if craftnowobject = 31 {sprite_index = spr_table2}//nvo deco
if craftnowobject = 32 {sprite_index = spr_demitable}
if craftnowobject = 33 {sprite_index = spr_tablegrunge}
if craftnowobject = 34 {sprite_index = spr_table7}
if craftnowobject = 35 {sprite_index = spr_burreaugrunge1}
if craftnowobject = 36 {sprite_index = spr_armoiregrunge1}
if craftnowobject = 37 {sprite_index = spr_etagere}
if craftnowobject = 38 {sprite_index = spr_crategrunge4}
if craftnowobject = 39 {sprite_index = spr_sofagrunge1}
if craftnowobject = 40 {sprite_index = spr_sofagrunge2}
if craftnowobject = 41 {sprite_index = spr_sofagrunge3}
if craftnowobject = 42 {sprite_index = spr_tabouretgrunge}
if craftnowobject = 43 {sprite_index = spr_chaisegrunge1}
if craftnowobject = 44 {sprite_index = spr_chaise}
if craftnowobject = 45 {sprite_index = spr_chaise2}
if craftnowobject = 46 {sprite_index = spr_chaise3}
if craftnowobject = 47 {sprite_index = spr_chaise4}
if craftnowobject = 48 {sprite_index = spr_wcgrunge}
if craftnowobject = 49 {sprite_index = spr_armoirevide}
if craftnowobject = 50 {sprite_index = spr_lit1}
if craftnowobject = 51 {sprite_index = spr_lit2}
if craftnowobject = 52 {sprite_index = spr_lit3}
if craftnowobject = 53 {sprite_index = spr_lit4}
if craftnowobject = 54 {sprite_index = spr_duvet}
if craftnowobject = 55 {sprite_index = spr_litcamp}
if craftnowobject = 56 {sprite_index = spr_pianogrunge}

//exterieur

if craftnowobject = 57 {sprite_index = spr_banccity1}
if craftnowobject = 58 {sprite_index = spr_banccity2}
if craftnowobject = 59 {sprite_index = spr_banccity3}
if craftnowobject = 60 {sprite_index = spr_barragebeton}
if craftnowobject = 61 {sprite_index = spr_debaras8}
if craftnowobject = 62 {sprite_index = spr_barricade2}
if craftnowobject = 63 {sprite_index = spr_barricade3}
if craftnowobject = 64 {sprite_index = spr_barricade6}
if craftnowobject = 65 {sprite_index = spr_barricade7}





/*if room = room119 or room = room115 or room = room116 or room = room117 or room = room118 {
}else{if poseobjet = 1 {instance_destroy();}}*/


if poseobjet = 0 {
if craftnowobject = 13 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {
scr_craftbuild1();
/*if point_distance(x,y,mouse_x,mouse_y) &lt; 50 {
if keyboard_check_pressed(ord("E")) {
if not instance_exists(obj_atelier){
with(instance_create(x,y,obj_atelier)){
idatelier = other.id
other.idatelier = id
}
}

}



}*/
}else{
if instance_exists(idatelier){
with(idatelier){
instance_destroy();
}
}
}
}//ATELIER FIN


//Machining center ARMOR
if craftnowobject = 14 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {
scr_craftbuild2();

/*if point_distance(x,y,mouse_x,mouse_y) &lt; 50 {
if keyboard_check_pressed(ord("E")) {


if obj_forgearmure.ilaunch = 0 {
obj_forgearmure.ilaunch = 1
obj_forgearmure.alarm[2] = 1
}else{
obj_forgearmure.ilaunch = 0
if instance_exists(obj_buttonforgearmure){
with(obj_buttonforgearmure){
instance_destroy();
}}
}


}



}*/
}


cuisineok = 0
with(obj_constructobjintrmap){
if craftnowobject = 14 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {other.cuisineok = 1}}
}

if cuisineok = 0 {
obj_forgearmure.ilaunch = 0
if instance_exists(obj_buttonforgearmure){
with(obj_buttonforgearmure){
instance_destroy();
}}
}
}//ATELIER FIN


//machining center Weapon
if craftnowobject = 15 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {
scr_craftbuild3();
/*
if point_distance(x,y,mouse_x,mouse_y) &lt; 50 {
if keyboard_check_pressed(ord("E")) {



if obj_forge.ilaunch = 0 {
obj_forge.ilaunch = 1
obj_forge.alarm[2] = 1
}else{
obj_forge.ilaunch = 0
if instance_exists(obj_buttonforge){
with(obj_buttonforge){
instance_destroy();
}}
}


}

}*/
}


cuisineok = 0
with(obj_constructobjintrmap){
if craftnowobject = 15 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {other.cuisineok = 1}}
}

if cuisineok = 0 {
obj_forge.ilaunch = 0
if instance_exists(obj_buttonforge){
with(obj_buttonforge){
instance_destroy();
}}
}
}//ATELIER FIN



//climatiseur
if craftnowobject = 16 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 550 {

if obj_zombie.freeze &lt; 100 {obj_zombie.freeze += 0.02/global.varfpsmax}

}else{

}
}//ATELIER FIN



//BAR
if craftnowobject = 17 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {
scr_craftbuild4();
if point_distance(x,y,mouse_x,mouse_y) &lt; 50 {
if keyboard_check(ord("E")) {if mousexnow = 0 {mousexnow = x}else{
if shakedroite = 1 {if mouse_x &gt; mousexnow + 20{shakedroite = 0 ;craft += 2;mousexnow = mouse_x
/*if audio_is_playing(snd_craftbar){}else{
audio_play_sound(snd_craftbar,0,false)}*/}}else{
if mouse_x &lt; mousexnow - 20{shakedroite = 1 ;craft += 2;mousexnow = mouse_x
/*if audio_is_playing(snd_craftbar){}else{
audio_play_sound(snd_craftbar,0,false)}*/}}
}
}}
/*if point_distance(x,y,mouse_x,mouse_y) &lt; 50 {
if keyboard_check_pressed(ord("E")) {


if obj_bar.ilaunch = 0 {

if not instance_exists(obj_buttonbar){
instance_create(view_xview,view_yview,obj_buttonbar)
}obj_bar.ilaunch = 1
}else{
}}}*/}




cuisineok = 0
with(obj_constructobjintrmap){
if craftnowobject = 17 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {other.cuisineok = 1}
}
}

if cuisineok = 0 {
obj_bar.ilaunch = 0
if instance_exists(obj_buttonbar){
with(obj_buttonbar){
instance_destroy();
}}
}
}//ATELIER FIN



//CUISINE
if craftnowobject = 18 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {
if point_distance(x,y,mouse_x,mouse_y) &lt; 50 {
if keyboard_check_pressed(ord("E")) {



if obj_cuisine.ilaunch = 0 {
obj_cuisine.ilaunch = 1
with(instance_create(x,y,obj_craftbouffe)){}
var obj_cuisine.i = 0
repeat(84){ obj_cuisine.i += 1
with(instance_create(x,y,obj_cuisineplus)){mode = obj_cuisine.i}
with(instance_create(x,y,obj_cuisinemoin)){mode = obj_cuisine.i}
}
}else{obj_cuisine.ilaunch = 0
if instance_exists(obj_cuisineplus){
with(obj_cuisineplus){
instance_destroy();
}}
if instance_exists(obj_cuisinemoin){
with(obj_cuisinemoin){
instance_destroy();
}}
}

}}
}




cuisineok = 0
with(obj_constructobjintrmap){
if craftnowobject = 18 {
if point_distance(x,y,obj_zombie.x,obj_zombie.y) &lt; 250 {other.cuisineok = 1}}
}

if cuisineok = 0 {
obj_cuisine.ilaunch = 0
if instance_exists(obj_cuisineplus){
with(obj_cuisineplus){
instance_destroy();
}}
}




}//ATELIER FIN







}
}//
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="o_explosion_piece">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//if other.explostopdgt = 0 {
if guildeid = obj_guilde.guildesend {}else{hp -= 100;other.explostopdgt = 1}
//}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bigexplo">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//if other.explostopdgt = 0 {
if guildeid = obj_guilde.guildesend {}else{hp -= 100;other.explostopdgt = 1}
//}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_epeeskin">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
if obj_zombie.skinchange[7] = 11 {


if obj_zombie.apoil_frame &gt; 26 &amp;&amp; obj_zombie.apoil_frame &lt; 30 {

if craftnowobject = 13 or craftnowobject = 14 or craftnowobject = 15 {
if craft &gt; 90 {positive += 2}else if craft &gt; 70 {positive += 1}else{negative += 1}
if demaragecraft = 0 {demaragecraft = 1}//craft += 10

if audio_is_playing(snd_craftweapon){}else{
audio_play_sound(snd_craftweapon,0,false)}

repeat(random_range(30,60)){
with(instance_create(x,y,obj_partetincelle)){
speed = random_range(5,25);
image_angle=random(360);
direction=random(360)}
    }
}


/*if bois &gt; 4 &amp;&amp; cuivre &gt; 1 {obj_zombie.avanceokcut = 0
instance_create(x,y,obj_firecreate)
with(obj_lootobj){if id = other.id{}else{if itemloot = 229 or itemloot = 232 {
if point_distance(x,y,other.x,other.y) &lt; 30 {instance_destroy();}}}}
instance_destroy();
}*/




}
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if guildeid = obj_guilde.guildesend {}else{hp -= 1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_shoot">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if guildeid = obj_guilde.guildesend {}else{hp -= 1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bulletassaut">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if guildeid = obj_guilde.guildesend {}else{hp -= 1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bulletassautnet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if guildeid = obj_guilde.guildesend {}else{hp -= 1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bulletnet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if guildeid = obj_guilde.guildesend {}else{hp -= 1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_shootnet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if guildeid = obj_guilde.guildesend {}else{hp -= 1}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if poseobjet = 1 {
global.constructnowaction = 0;
craftnowobject = 0;
if instance_exists(obj_invbutton){obj_invbutton.craftnowobject = 0;}
instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///ENVOI DES DONNE NET ET POSE D OBJET
if global.pasdeconstruct = 0 {
if alarm[0] &lt; 0 &amp;&amp; alarm[1] &lt; 0{
if nocreate = 0 {
if poseobjet = 1 {
var var123 = craftnowobject +273
scr_itemdrop(var123)
instance_create(x,y,obj_fumeecaisse2)
audio_play_sound_at(snd_construct, mouse_x, mouse_y,0,global.falloff_ref2, global.falloff_max2, 1, false, 1);


if instance_exists(obj_network){

//ajout props
for (i = 0; i &lt; 500; i += 1)
    {
    if obj_constructreception.mygridprops[# i, 2] &lt;= 0 {
    
//repeat2 = ds_grid_height(obj_constructreception.mygridsolo);
ds_grid_set(obj_constructreception.mygridprops, i, 2, floor(x));
ds_grid_set(obj_constructreception.mygridprops, i, 3, floor(y));
ds_grid_set(obj_constructreception.mygridprops, i, 6, real(room)); 
i = 500;
     }
}

 for (i = 0; i &lt; 5000; i += 1)
    {
    if obj_constructreception.mygrid[# i, 5] &lt;= 0 {
    
//repeat2 = ds_grid_height(obj_constructreception.mygridsolo);
ds_grid_set(obj_constructreception.mygrid, i, 1, obj_guilde.guildesend);
ds_grid_set(obj_constructreception.mygrid, i, 2, x);
ds_grid_set(obj_constructreception.mygrid, i, 3, y);
ds_grid_set(obj_constructreception.mygrid, i, 4, image_angle);
ds_grid_set(obj_constructreception.mygrid, i, 5, craftnowobject);
ds_grid_set(obj_constructreception.mygrid, i, 6, real(room)); 
i = 5000;
     }
}

}else{
 for (i = 0; i &lt; 5000; i += 1)
    {
    if obj_constructreception.mygridsolo[# i, 5] &lt;= 0 {
    
//repeat2 = ds_grid_height(obj_constructreception.mygridsolo);
ds_grid_set(obj_constructreception.mygridsolo, i, 1, obj_guilde.guildesend);
ds_grid_set(obj_constructreception.mygridsolo, i, 2, x);
ds_grid_set(obj_constructreception.mygridsolo, i, 3, y);
ds_grid_set(obj_constructreception.mygridsolo, i, 4, image_angle);
ds_grid_set(obj_constructreception.mygridsolo, i, 5, craftnowobject);
ds_grid_set(obj_constructreception.mygridsolo, i, 6, real(room)); 
i = 5000;
     }
}}

//A ENVOYER DANS LE NET CODE UNE FOIS
obj_constructreception.guildnetbeta = obj_guilde.guildesend
obj_constructreception.xnetbeta = x
obj_constructreception.ynetbeta = y
obj_constructreception.anglenetbeta = image_angle
obj_constructreception.objnetbeta = craftnowobject

//obj_constructreception.roomnetbeta = 1//a enlever

obj_constructreception.roomnetbeta = room
/*if room = room119 {obj_constructreception.roomnetbeta = 1}
if room = room115 {obj_constructreception.roomnetbeta = 2}
if room = room116 {obj_constructreception.roomnetbeta = 3}
if room = room117 {obj_constructreception.roomnetbeta = 4}
if room = room118 {obj_constructreception.roomnetbeta = 5}*/

global.constructnowaction = 0;}
poseobjet = 0



}
}
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//if craftnowobject = 1 {
if alarm[0] &lt; 0 {
if poseobjet = 1 {
image_angle = obj_zombie.image_angle

var xxmouse = mouse_x
var yymouse = mouse_y

xxpre = 0
yypre = 0

var xx = mouse_x
var yy = mouse_y

var xx1 = xx + lengthdir_x(80,image_angle)
var yy1 = yy + lengthdir_y(80,image_angle)
var xx2 = xx + lengthdir_x(80,image_angle+90)
var yy2 = yy + lengthdir_y(80,image_angle+90)
var xx3 = xx + lengthdir_x(80,image_angle+180)
var yy3 = yy + lengthdir_y(80,image_angle+180)
var xx4 = xx + lengthdir_x(80,image_angle+270)
var yy4 = yy + lengthdir_y(80,image_angle+270)

//NE PAS METTRE TROP DE LUMIERE TROP PROCHE
if craftnowobject = 25 {
if instance_exists(obj_constructobjintrmap){
with(obj_constructobjintrmap){
if id = other.id {}else{

if craftnowobject = 25 {
if point_distance(x,y,mouse_x,mouse_y) &lt; 1000 {
other.checkpasok = 1
}
}
}
}}}

if instance_exists(obj_constructfloormap){

with(obj_constructfloormap){


if guildeid = obj_guilde.guildesend {


var xxmouse = mouse_x
var yymouse = mouse_y
nearfloor = id
if id = other.id {}else{
//other.checkok = 1
//pour voir si l objet est (SUR) proche d'une structure et dire ok sinn po ok en bas
if other.craftnowobject = 15 or other.craftnowobject = 16 or other.craftnowobject = 25 {
if other.craftnowobject &gt; 57 {
other.checkok = 0//pour obj exterieur
}else{other.checkok = 1}//pour obj interieur
}else{
if point_distance(x,y,other.x,other.y) &lt; 120 {
if other.craftnowobject &gt; 57 {
other.checkpasok = 1
other.checkok = 0//pour obj exterieur
}else{other.checkok = 1}//pour obj interieur
}else{if other.craftnowobject &gt; 57 {
other.checkok = 1//pour obj exterieur
}
 } }
////////

}
}else{//guildeid
if point_distance(x,y,other.x,other.y) &lt; 1500 {
other.checkpasok = 1
}
}

}//with



}

if xxpre = 0 {}else{
var xx = xxpre
var yy = yypre
}

x = xx
y = yy

if checkok = 0 {nocreate = 1}
if checkok = 1 {nocreate = 0}
if checkpasok = 1 {nocreate = 1}

if place_meeting(x,y,obj_arbreneige){nocreate = 1}else{}
if place_meeting(x,y,obj_montagne1){nocreate = 1}else{}
if place_meeting(x,y,obj_montagne2){nocreate = 1}else{}
if place_meeting(x,y,obj_montagne3){nocreate = 1}else{}
if place_meeting(x,y,obj_constructobjintrmap){nocreate = 1}else{}
//if place_meeting(x,y,obj_montagne2){nocreate = 1}else{}
//if place_meeting(x,y,obj_montagne2){nocreate = 1}else{}
if instance_exists(obj_teleport1){teleproche = instance_nearest(x,y,obj_teleport1)
if point_distance(x,y,teleproche.x,teleproche.y) &lt; 400 {nocreate = 1}
}


if nocreate = 0 {colorvar = c_green}else{colorvar = c_red}
image_angle = round(image_angle)
draw_sprite_ext(sprite_index,0,xx,yy,1,1,image_angle,colorvar,0.5)
solid = false
}else{//POSE OBJET
solid = true
image_angle = round(image_angle)
if checkdestroygreen = 1 {colornow = c_green}else{colornow = c_white}
draw_sprite_ext(sprite_index,0,x,y,1,1,image_angle,colornow,1)

}

//draw_text(obj_zombie.x,obj_zombie.y,"exist put1")
//}



}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="27">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if poseobjet = 1 {
instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
